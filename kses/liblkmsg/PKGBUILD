pkgname=liblkmsg
pkgver=1.0.2
pkgrel=1
pkgdesc="KSES Messaging Library for Lua"
arch=('i686' 'x86_64')
license=('LGPL')
url="http://www.guinnux.org"
depends=('libklog' 'libkmsg' 'lua')
source=('liblkmsg::git+http://bugz.kses.net/gitrepo/KLib/lkmsg.git')
md5sums=('SKIP')

options=('strip' '!staticlibs')


pkgver()
{

  cd $srcdir/$pkgname

  autoreconf -fi > /dev/null
  
  readarray -t lines <<<"$(./configure --version)"
  versionarray=(${lines[0]// / })
  echo ${versionarray[2]}
}

build()
{
  cd $srcdir/$pkgname
  ./configure --host=$CHOST \
            --prefix=/usr \
            --libdir=/usr/share/lua/kses
              
  make              
}

package()
{
  cd $srcdir/$pkgname
  make DESTDIR=$pkgdir install
  make DESTDIR=$pkgdir install-luaDATA
}
